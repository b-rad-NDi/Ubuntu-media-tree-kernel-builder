From 7155954fd7cb46065dc74619e45992923b536198 Mon Sep 17 00:00:00 2001
From: Bradford Love <hidden@email.co>
Date: Tue, 30 Apr 2024 12:22:41 -0500
Subject: [PATCH 6/6] Packaging updates

---
 debian.master/control.d/flavour-control.stub |  2 +-
 debian.master/copyright                      | 21 ++++++++++++++++++++
 debian.master/rules.d/amd64.mk               |  2 +-
 debian.master/rules.d/arm64.mk               |  2 +-
 debian.master/rules.d/s390x.mk               |  2 +-
 debian.master/rules.d/x32.mk                 |  2 +-
 debian/control.d/flavour-buildinfo.stub      |  2 +-
 debian/rules.d/0-common-vars.mk              |  4 ++--
 8 files changed, 29 insertions(+), 8 deletions(-)

diff --git a/debian.master/control.d/flavour-control.stub b/debian.master/control.d/flavour-control.stub
index a7ba586e6909..a611f9e67630 100644
--- a/debian.master/control.d/flavour-control.stub
+++ b/debian.master/control.d/flavour-control.stub
@@ -32,7 +32,7 @@ Recommends: BOOTLOADER, initramfs-tools | linux-initramfs-tool
 Breaks: flash-kernel (<< 3.90ubuntu2) [arm64 armhf], s390-tools (<< 2.3.0-0ubuntu3) [s390x]
 Conflicts: linux-image=SIGN-PEER-PKG=-PKGVER-ABINUM-FLAVOUR
 Suggests: fdutils, SRCPKGNAME-tools, linux-headers-PKGVER-ABINUM-FLAVOUR, linux-modules-extra-PKGVER-ABINUM-FLAVOUR
-Description: Linux kernel image for version PKGVER on DESC
+Description: Linux kernel image, with additional media tree drivers for version PKGVER on DESC
  This package contains the=SIGN-ME-TXT= Linux kernel image for version PKGVER on
  DESC.
  .
diff --git a/debian.master/copyright b/debian.master/copyright
index d1d04a6d6697..7b2ba9f58dc4 100644
--- a/debian.master/copyright
+++ b/debian.master/copyright
@@ -1,3 +1,24 @@
+#############################################################
+#############################################################
+#############################################################
+
+This is a patched version of the Ubuntu kernel.
+
+Additional patches for hardware/performance/etc are included.
+
+All patches are available at https://github.com/b-rad-NDi/Ubuntu-media-tree-kernel-builder
+
+The packaging and build system is spoonsored by Hauppauge Computer Works.
+
+    http://www.hauppauge.com
+
+Errors in packaging or building should be directed to github above.
+Bugs in the kernel or media tree drivers should be reported upstream.
+
+#############################################################
+#############################################################
+#############################################################
+
 This is the Ubuntu prepackaged version of the Linux kernel.
 Linux was written by Linus Torvalds <Linus.Torvalds@cs.Helsinki.FI>
 and others.
diff --git a/debian.master/rules.d/amd64.mk b/debian.master/rules.d/amd64.mk
index 668da4e33b9c..c8caf98ef6a3 100644
--- a/debian.master/rules.d/amd64.mk
+++ b/debian.master/rules.d/amd64.mk
@@ -7,7 +7,7 @@ kernel_file	= arch/$(build_arch)/boot/bzImage
 install_file	= vmlinuz
 vdso		= vdso_install
 no_dumpfile	= true
-uefi_signed     = true
+uefi_signed     = false
 do_tools_usbip  = true
 do_tools_cpupower = true
 do_tools_perf   = true
diff --git a/debian.master/rules.d/arm64.mk b/debian.master/rules.d/arm64.mk
index 2f23ecddcea0..c19a9ba242ce 100644
--- a/debian.master/rules.d/arm64.mk
+++ b/debian.master/rules.d/arm64.mk
@@ -6,7 +6,7 @@ build_image	= Image.gz
 kernel_file	= arch/$(build_arch)/boot/Image.gz
 install_file	= vmlinuz
 no_dumpfile = true
-uefi_signed     = true
+uefi_signed     = false
 
 vdso		= vdso_install
 
diff --git a/debian.master/rules.d/s390x.mk b/debian.master/rules.d/s390x.mk
index e679eaa83cad..f0f936af83a7 100644
--- a/debian.master/rules.d/s390x.mk
+++ b/debian.master/rules.d/s390x.mk
@@ -10,7 +10,7 @@ vdso		= vdso_install
 no_dumpfile	= true
 
 do_extras_package = true
-sipl_signed       = true
+sipl_signed       = false
 do_tools_usbip    = true
 do_tools_cpupower = true
 do_tools_perf     = true
diff --git a/debian.master/rules.d/x32.mk b/debian.master/rules.d/x32.mk
index fc6c4179a67e..6b5853905a0c 100644
--- a/debian.master/rules.d/x32.mk
+++ b/debian.master/rules.d/x32.mk
@@ -7,6 +7,6 @@ kernel_file	= arch/$(build_arch)/boot/bzImage
 install_file	= vmlinuz
 vdso		= vdso_install
 no_dumpfile	= true
-uefi_signed     = true
+uefi_signed     = false
 
 do_flavour_image_package = false
diff --git a/debian/control.d/flavour-buildinfo.stub b/debian/control.d/flavour-buildinfo.stub
index dd08a6715f6b..68df67c02a29 100644
--- a/debian/control.d/flavour-buildinfo.stub
+++ b/debian/control.d/flavour-buildinfo.stub
@@ -1,5 +1,5 @@
 
-Package: linux-buildinfo-PKGVER-ABINUM-FLAVOUR
+Package: linux-buildinfo-mediatree-PKGVER-ABINUM-FLAVOUR
 Build-Profiles: <!stage1>
 Architecture: ARCH
 Section: kernel
diff --git a/debian/rules.d/0-common-vars.mk b/debian/rules.d/0-common-vars.mk
index 5cd38f6f1b6c..04c632afc44d 100644
--- a/debian/rules.d/0-common-vars.mk
+++ b/debian/rules.d/0-common-vars.mk
@@ -105,7 +105,7 @@ bin_pkg_name_signed=linux-image-$(abi_release)
 bin_pkg_name_unsigned=linux-image-unsigned-$(abi_release)
 mods_pkg_name=linux-modules-$(abi_release)
 mods_extra_pkg_name=linux-modules-extra-$(abi_release)
-bldinfo_pkg_name=linux-buildinfo-$(abi_release)
+bldinfo_pkg_name=linux-buildinfo-mediatree-$(abi_release)
 hdrs_pkg_name=linux-headers-$(abi_release)
 rust_pkg_name=$(src_pkg_name)-lib-rust-$(abi_release)
 indep_hdrs_pkg_name=$(src_pkg_name)-headers-$(abi_release)
@@ -115,7 +115,7 @@ indep_lib_rust_pkg_name=$(src_pkg_name)-lib-rust-$(abi_release)
 # Similarly with the linux-source package, you need not build it as a developer. Its
 # somewhat I/O intensive and utterly useless.
 #
-do_source_package=true
+do_source_package=false
 do_source_package_content=true
 ifeq ($(do_full_build),false)
 do_source_package_content=false
-- 
2.43.0

